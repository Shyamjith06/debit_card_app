image: maven:3.6.1
pipelines:
  default:
    - step:
        name: maven clean
        caches:
          - maven
        script:
          - cd project_code/
          - mvn clean 
    - step:
        name: maven package
        caches:
          - maven
        script:
             - cd project_code/
             - mvn package
             - ls target/
    - step:
          name: maven install
          caches:
               - maven
          script:
           - cd project_code/
           - mvn install 
             
             
    - step:
         image: williamyeh/ansible:debian9
         name: deployment
         deployment: production
         caches:
           - maven
         script:
         - cd project_code/
         - sudo ansible-playbook deploy.yml -i inventory, -e barnch=master
                 