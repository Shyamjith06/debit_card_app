image: maven:3.6.1
pipelines:
  default:
    - step:
        name: maven clean
        caches:
          - maven
        script:
          - mvn clean
    - step:
        name: maven package
        caches:
          - maven
        script:
             - mvn package
             - ls target/
    - step:
         name: deployment
         deployment: production
         caches:
           - maven
         script:
                 - pipe: microsoft/azure-web-apps-deploy:1.0.3
                   variables:
                           AZURE_APP_ID: $AZURE_APP_ID
                           AZURE_PASSWORD: $AZURE_PASSWORD
                           AZURE_TENANT_ID: $AZURE_TENANT_ID
                           AZURE_RESOURCE_GROUP: $AZURE_RESOURCE_GROUP
                           AZURE_APP_NAME: $AZURE_APP_NAME